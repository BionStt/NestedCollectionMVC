@model NestedCollectionModelMVC.Models.Employee
@using NestedCollectionModelMVC.Helper

@{
    ViewBag.Title = "Home Page";
}

<h2>Add New Employee</h2>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    @Html.EditorForModel()
    <p>
        <button type="submit">Create Employee</button>
    </p>
}

<p>
    @Html.AddLink("Add More Phone Numbers", "#phoneNumbers", ".phoneNumber", "Phones", typeof(NestedCollectionModelMVC.Models.Phone))
</p>

<p style="color:red;">
    @ViewBag.Message
</p>

<script>
    function removeNestedForm(element, container, deleteElement) {
        $container = $(element).parents(container);
        $container.find(deleteElement).val('True');
        $container.hide();
    }
    function addNestedForm(container, counter, ticks, content) {
        var nextIndex = $(counter).length;
        var pattern = new RegExp(ticks, "gi");
        content = content.replace(pattern, nextIndex);
        $(container).append(content);
    }
</script>